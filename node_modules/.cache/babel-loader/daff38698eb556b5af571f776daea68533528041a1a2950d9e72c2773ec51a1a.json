{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import cl from'./PaymentPage.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const PaymentPage=()=>{const[isPayed,setIsPayed]=useState(false);const navigate=useNavigate();const[cardNumber,setCardNumber]=useState(\"\");const[date,setDate]=useState(\"\");const[cvc,setCvc]=useState(\"\");const[errors,setErrors]=useState({});const onSubmit=e=>{e.preventDefault();const validationErrors=validateForm();if(Object.keys(validationErrors).length===0){setIsPayed(true);setTimeout(()=>{navigate(\"/\");setIsPayed(false);},2000);}else{setErrors(validationErrors);}};const validateForm=()=>{const errors={};const regexNumber=/^[0-9 ]+$/;const regexMonth=/^(0[1-9]|1[0-2])\\/([0-9]{2})$/;if(!cardNumber){errors.cartNumber=\"пустое поле\";}else if(!regexNumber.test(cardNumber)){errors.cartNumber=\"допустимы только цифры\";}else if(cardNumber.replace(/\\s/g,\"\").length<16){errors.cartNumber=\"минимум 16 цифр\";}if(!date){errors.month=\"пустое поле\";}else if(!regexMonth.test(date)){errors.month=\"Неверный формат ввода\";}else if(date.length<5){errors.month=\"минимум 4 цифры\";}if(!cvc){errors.cvc=\"пустое поле\";}else if(!regexNumber.test(cvc)){errors.cvc=\"допустимы только цифры\";}else if(cvc.length!==3){errors.cvc=\"Необходимо 3 символа\";}return errors;};return/*#__PURE__*/_jsx(\"div\",{className:cl.container,children:isPayed?/*#__PURE__*/_jsx(\"div\",{className:cl.paid,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u043A\\u0430\\u0437 \\u043E\\u043F\\u043B\\u0430\\u0447\\u0435\\u043D\"})}):/*#__PURE__*/_jsxs(\"form\",{className:cl.form,onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"p\",{className:cl.paymentTitle,children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{className:cl.paymentContainer,children:/*#__PURE__*/_jsxs(\"div\",{className:cl.flexColumnCenter,children:[/*#__PURE__*/_jsx(\"input\",{className:cl.cartNumber,placeholder:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043A\\u0430\\u0440\\u0442\\u044B\",value:cardNumber.replace(/\\s/g,\"\").replace(/(\\d{4})/g,\"$1 \").trim(),onChange:e=>setCardNumber(e.target.value),maxLength:19}),errors.cartNumber&&/*#__PURE__*/_jsx(\"div\",{className:cl.errorMessage,children:errors.cartNumber}),/*#__PURE__*/_jsxs(\"div\",{className:cl.cartInfo,children:[/*#__PURE__*/_jsxs(\"div\",{className:cl.flexColumn,children:[/*#__PURE__*/_jsx(\"input\",{className:cl.month,value:date.replace(/(\\d{2})(\\d{2})/,\"$1/$2\"),placeholder:\"MM/YY\",onChange:e=>setDate(e.target.value),maxLength:5}),errors.month&&/*#__PURE__*/_jsx(\"div\",{className:cl.errorMessage,children:errors.month})]}),/*#__PURE__*/_jsxs(\"div\",{className:cl.flexColumn,children:[/*#__PURE__*/_jsx(\"input\",{className:cl.cvc,value:cvc,placeholder:\"CVC\",onChange:e=>setCvc(e.target.value),maxLength:3}),errors.cvc&&/*#__PURE__*/_jsx(\"div\",{className:cl.errorMessage,children:errors.cvc})]})]})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:cl.pay,children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})]})});};","map":{"version":3,"names":["React","useState","useNavigate","cl","jsx","_jsx","jsxs","_jsxs","PaymentPage","isPayed","setIsPayed","navigate","cardNumber","setCardNumber","date","setDate","cvc","setCvc","errors","setErrors","onSubmit","e","preventDefault","validationErrors","validateForm","Object","keys","length","setTimeout","regexNumber","regexMonth","cartNumber","test","replace","month","className","container","children","paid","form","paymentTitle","paymentContainer","flexColumnCenter","placeholder","value","trim","onChange","target","maxLength","errorMessage","cartInfo","flexColumn","type","pay"],"sources":["C:/Users/denis/WebstormProjects/onlineStoreNeo1/src/pages/paymentPage/PaymentPage.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport cl from './PaymentPage.module.css'\r\n\r\ninterface FormErrors {\r\n    cartNumber?: string;\r\n    month?: string;\r\n    cvc?: string;\r\n}\r\n\r\nexport const PaymentPage: React.FC = () => {\r\n    const [isPayed, setIsPayed] = useState(false);\r\n    const navigate = useNavigate();\r\n    const [cardNumber, setCardNumber] = useState(\"\");\r\n    const [date, setDate] = useState(\"\");\r\n    const [cvc, setCvc] = useState(\"\");\r\n    const [errors, setErrors] = useState<FormErrors>({});\r\n\r\n    const onSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const validationErrors = validateForm();\r\n        if (Object.keys(validationErrors).length === 0) {\r\n            setIsPayed(true);\r\n            setTimeout(() => {\r\n                navigate(\"/\");\r\n                setIsPayed(false);\r\n            }, 2000);\r\n        } else {\r\n            setErrors(validationErrors);\r\n        }\r\n    };\r\n\r\n    const validateForm = (): FormErrors => {\r\n        const errors: FormErrors = {};\r\n        const regexNumber = /^[0-9 ]+$/;\r\n        const regexMonth = /^(0[1-9]|1[0-2])\\/([0-9]{2})$/;\r\n\r\n        if (!cardNumber) {\r\n            errors.cartNumber = \"пустое поле\";\r\n        } else if (!regexNumber.test(cardNumber)) {\r\n            errors.cartNumber = \"допустимы только цифры\";\r\n        } else if (cardNumber.replace(/\\s/g, \"\").length < 16) {\r\n            errors.cartNumber = \"минимум 16 цифр\";\r\n        }\r\n\r\n        if (!date) {\r\n            errors.month = \"пустое поле\";\r\n        } else if (!regexMonth.test(date)) {\r\n            errors.month = \"Неверный формат ввода\";\r\n        } else if (date.length < 5) {\r\n            errors.month = \"минимум 4 цифры\";\r\n        }\r\n\r\n        if (!cvc) {\r\n            errors.cvc = \"пустое поле\";\r\n        } else if (!regexNumber.test(cvc)) {\r\n            errors.cvc = \"допустимы только цифры\";\r\n        } else if (cvc.length !== 3) {\r\n            errors.cvc = \"Необходимо 3 символа\";\r\n        }\r\n\r\n        return errors;\r\n    };\r\n\r\n    return (\r\n        <div className={cl.container}>\r\n            {isPayed ? (\r\n                <div className={cl.paid}>\r\n                    <p>Заказ оплачен</p>\r\n                </div>\r\n            ) : (\r\n                <form className={cl.form} onSubmit={onSubmit}>\r\n                    <p className={cl.paymentTitle}>Оплатить</p>\r\n                    <div className={cl.paymentContainer}>\r\n                        <div className={cl.flexColumnCenter}>\r\n\r\n                            <input\r\n                                className={cl.cartNumber}\r\n                                placeholder=\"Номер карты\"\r\n                                value={cardNumber\r\n                                    .replace(/\\s/g, \"\")\r\n                                    .replace(/(\\d{4})/g, \"$1 \")\r\n                                    .trim()}\r\n                                onChange={(e) => setCardNumber(e.target.value)}\r\n                                maxLength={19}\r\n                            />\r\n                            {errors.cartNumber && (\r\n                                <div className={cl.errorMessage}>{errors.cartNumber}</div>\r\n                            )}\r\n                            <div className={cl.cartInfo}>\r\n                                <div className={cl.flexColumn}>\r\n\r\n                                    <input\r\n                                        className={cl.month}\r\n                                        value={date.replace(/(\\d{2})(\\d{2})/, \"$1/$2\")}\r\n                                        placeholder=\"MM/YY\"\r\n                                        onChange={(e) => setDate(e.target.value)}\r\n                                        maxLength={5}\r\n                                    />\r\n                                    {errors.month && (\r\n                                        <div className={cl.errorMessage}>{errors.month}</div>\r\n                                    )}\r\n                                </div>\r\n                                <div className={cl.flexColumn}>\r\n\r\n                                    <input\r\n                                        className={cl.cvc}\r\n                                        value={cvc}\r\n                                        placeholder=\"CVC\"\r\n                                        onChange={(e) => setCvc(e.target.value)}\r\n                                        maxLength={3}\r\n                                    />\r\n                                    {errors.cvc && (\r\n                                        <div className={cl.errorMessage}>{errors.cvc}</div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <button type=\"submit\" className={cl.pay}>Оплатить заказ</button>\r\n                </form>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}